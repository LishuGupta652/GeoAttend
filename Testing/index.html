<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <script src="//maps.googleapis.com/maps/api/js?v=3.exp&sensor=true"></script>

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <h1 id="data"></h1>
    <h1>Last Fetched on</h1>
    <h1 id="time"></h1>
    <h1>Your Current location is :</h1>
    <h1 id="location_text"></h1>
    <button onclick="getLocation()">Get Location</button>
  </body>
  <script>
    // get users location either on every 5 seconds or on button click
    // if user allows location then show the location

    function showPosition(position) {
      console.log(position);
      document.getElementById("data").innerHTML = JSON.stringify(position);
      var lat = position.coords.latitude;
      var long = position.coords.longitude;
      document.getElementById("location_text").innerHTML =
        "Latitude: " +
        lat +
        "<br>Longitude: " +
        long +
        "<br>Accuracy: " +
        position.coords.accuracy +
        "<br>Altitude: " +
        position.coords.altitude +
        "<br>Altitude Accuracy: " +
        position.coords.altitudeAccuracy +
        "<br>Heading: " +
        position.coords.heading +
        "<br>Speed: " +
        position.coords.speed +
        "<br>Timestamp: " +
        position.timestamp +
        "<br>Time: " +
        new Date(position.timestamp).toLocaleTimeString() +
        "<br>Date: " +
        new Date(position.timestamp).toLocaleDateString() +
        "<br>Timezone: " +
        new Date(position.timestamp).getTimezoneOffset() / 60;
    }

    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition);

        // get last fetched time
        var date = new Date();
        var time = date.toLocaleTimeString();
        document.getElementById("time").innerHTML = time;

        // navigator.geolocation.watchPosition(showPosition);
      } else {
        alert("Geolocation is not supported by this browser.");
      }
    }
    getLocation();
    setInterval(() => {
      getLocation();
    }, 5000);
  </script>
</html>
